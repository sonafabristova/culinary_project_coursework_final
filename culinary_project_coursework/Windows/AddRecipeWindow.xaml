<Window x:Class="culinary_project_coursework.Windows.AddRecipeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        WindowState="Maximized"
        WindowStyle="None"
        Title="Добавить новый рецепт" 
        WindowStartupLocation="CenterOwner"
        Background="#FFF8F0">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="25">

            <!-- Заголовок -->
            <StackPanel HorizontalAlignment="Center" 
                        Margin="0,0,0,25">
                <TextBlock Text="➕ Добавить новый рецепт" 
                          FontSize="28" 
                          FontWeight="SemiBold" 
                          Foreground="#8B4513"/>
                <Border Height="3" 
                        Width="300" 
                        Background="#DEB887" 
                        Margin="0,8,0,0"/>
            </StackPanel>

            <!-- Название рецепта -->
            <TextBlock Text="Название рецепта:" 
                      FontSize="16"
                      FontWeight="SemiBold"
                      Foreground="#8B4513"
                      Margin="0,0,0,8"/>
            <Border Background="White"
                    BorderBrush="#DEB887"
                    BorderThickness="2"
                    Padding="2"
                    Margin="0,0,0,25">
                <TextBox x:Name="NameTextBox" 
                        FontSize="15"
                        Padding="12,10"
                        Background="White"
                        BorderThickness="0"/>
            </Border>

            <!-- Фото готового блюда -->
            <Border x:Name="PhotoBorder" 
                    BorderBrush="#DEB887" 
                    BorderThickness="2" 
                    Background="#FFFDF8"
                    Height="180"
                    Margin="0,0,0,25"
                    HorizontalAlignment="Center"
                    Width="350">
                <Grid>
                    <!-- Изображение рецепта -->
                    <Image x:Name="RecipeImage"
                           Stretch="Uniform"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           MaxHeight="180"
                           MaxWidth="350"/>

                    <!-- Кнопка "+" поверх изображения -->
                    <Button x:Name="AddPhotoButton"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="AddPhotoButton_Click">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="+" 
                                      FontSize="60"
                                      Foreground="#8B4513"
                                      HorizontalAlignment="Center"/>
                            <TextBlock Text="📸 Фото готового блюда"
                                      VerticalAlignment="Center"
                                      HorizontalAlignment="Center"
                                      Foreground="#8B4513"
                                      FontSize="14"
                                      Margin="0,15,0,0"/>
                        </StackPanel>
                    </Button>

                    <!-- Кнопка удаления фото -->
                    <Button x:Name="RemovePhotoButton"
                            Content="✕"
                            FontWeight="Bold"
                            Background="#CD5C5C"
                            Foreground="White"
                            Width="35"
                            Height="35"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="5"
                            Padding="0"
                            Click="RemovePhotoButton_Click"
                            Visibility="Collapsed"/>
                </Grid>
            </Border>

            <!-- БЖУ и калории -->
            <Grid Margin="0,0,0,25">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Белки -->
                <StackPanel Grid.Column="0" Margin="5">
                    <TextBlock Text="🥩 Белки (г):" 
                              FontWeight="SemiBold" 
                              FontSize="14"
                              Foreground="#8B4513"
                              Margin="0,0,0,5"/>
                    <Border Background="White"
                            BorderBrush="#DEB887"
                            BorderThickness="2"
                            Padding="2">
                        <TextBox x:Name="ProteinsTextBox" 
                                Text="0"
                                Padding="8"
                                FontSize="14"
                                Background="White"
                                BorderThickness="0"/>
                    </Border>
                </StackPanel>

                <!-- Жиры -->
                <StackPanel Grid.Column="1" Margin="5">
                    <TextBlock Text="🥑 Жиры (г):" 
                              FontWeight="SemiBold" 
                              FontSize="14"
                              Foreground="#8B4513"
                              Margin="0,0,0,5"/>
                    <Border Background="White"
                            BorderBrush="#DEB887"
                            BorderThickness="2"
                            Padding="2">
                        <TextBox x:Name="FatsTextBox" 
                                Text="0"
                                Padding="8"
                                FontSize="14"
                                Background="White"
                                BorderThickness="0"/>
                    </Border>
                </StackPanel>

                <!-- Углеводы -->
                <StackPanel Grid.Column="2" Margin="5">
                    <TextBlock Text="🍞 Углеводы (г):" 
                              FontWeight="SemiBold" 
                              FontSize="14"
                              Foreground="#8B4513"
                              Margin="0,0,0,5"/>
                    <Border Background="White"
                            BorderBrush="#DEB887"
                            BorderThickness="2"
                            Padding="2">
                        <TextBox x:Name="CarbsTextBox" 
                                Text="0"
                                Padding="8"
                                FontSize="14"
                                Background="White"
                                BorderThickness="0"/>
                    </Border>
                </StackPanel>

                <!-- Калории -->
                <StackPanel Grid.Column="3" Margin="5">
                    <TextBlock Text="🔥 Калории:" 
                              FontWeight="SemiBold" 
                              FontSize="14"
                              Foreground="#8B4513"
                              Margin="0,0,0,5"/>
                    <Border Background="White"
                            BorderBrush="#DEB887"
                            BorderThickness="2"
                            Padding="2">
                        <TextBox x:Name="CaloriesTextBox" 
                                Text="0"
                                Padding="8"
                                FontSize="14"
                                Background="White"
                                BorderThickness="0"/>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- Время приготовления -->
            <TextBlock Text="⏱️ Время приготовления (минуты):" 
                      FontSize="16"
                      FontWeight="SemiBold"
                      Foreground="#8B4513"
                      Margin="0,0,0,8"/>
            <Border Background="White"
                    BorderBrush="#DEB887"
                    BorderThickness="2"
                    Padding="2"
                    Margin="0,0,0,25">
                <TextBox x:Name="TimeTextBox" 
                        Text="0"
                        Padding="12,10"
                        FontSize="15"
                        Background="White"
                        BorderThickness="0"/>
            </Border>

            <!-- Ингредиенты -->
            <TextBlock Text="🥕 Ингредиенты:" 
                      FontSize="18"
                      FontWeight="SemiBold"
                      Foreground="#8B4513"
                      Margin="0,0,0,15"/>

            <ItemsControl x:Name="IngredientsList" 
                         Margin="0,0,0,15">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,8,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="140"/>
                                <ColumnDefinition Width="40"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" 
                                    Background="White"
                                    BorderBrush="#DEB887"
                                    BorderThickness="2"
                                    Padding="2"
                                    Margin="0,0,5,0">
                                <TextBox Text="{Binding Name}"
                                        Padding="8"
                                        FontSize="14"
                                        Background="White"
                                        BorderThickness="0"/>
                            </Border>

                            <Border Grid.Column="1" 
                                    Background="White"
                                    BorderBrush="#DEB887"
                                    BorderThickness="2"
                                    Padding="2"
                                    Margin="0,0,5,0">
                                <TextBox Text="{Binding Amount}"
                                        Padding="8"
                                        FontSize="14"
                                        Background="White"
                                        BorderThickness="0"/>
                            </Border>

                            <Border Grid.Column="2" 
                                    Background="White"
                                    BorderBrush="#DEB887"
                                    BorderThickness="2"
                                    Padding="2"
                                    Margin="0,0,5,0">
                                <ComboBox SelectedItem="{Binding Unit}"
                                         Padding="8"
                                         FontSize="14"
                                         Background="White"
                                         BorderThickness="0">
                                    <ComboBoxItem Content="г"/>
                                    <ComboBoxItem Content="мл"/>
                                    <ComboBoxItem Content="шт"/>
                                    <ComboBoxItem Content="ст.л."/>
                                    <ComboBoxItem Content="ч.л."/>
                                    <ComboBoxItem Content="щеп."/>
                                </ComboBox>
                            </Border>

                            <Button Grid.Column="3" 
                                    Content="✕"
                                    Background="#CD5C5C"
                                    Foreground="White"
                                    FontWeight="Bold"
                                    FontSize="16"
                                    Click="RemoveIngredient_Click"
                                    Padding="2"
                                    Height="35"/>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Кнопка добавления ингредиента -->
            <Button Content="➕ Добавить ингредиент" 
                    Background="#FF7F50"
                    Foreground="White"
                    FontSize="15"
                    FontWeight="SemiBold"
                    Padding="15,10"
                    Click="AddIngredient_Click"
                    HorizontalAlignment="Left"
                    Margin="0,0,0,25"/>

            <!-- Описание приготовления -->
            <TextBlock Text="📝 Внесите описание приготовления блюда:" 
                      FontSize="18"
                      FontWeight="SemiBold"
                      Foreground="#8B4513"
                      Margin="0,0,0,15"/>

            <Border Background="White"
                    BorderBrush="#DEB887"
                    BorderThickness="2"
                    Padding="2"
                    Margin="0,0,0,25">
                <TextBox x:Name="DescriptionTextBox" 
                        Height="120"
                        TextWrapping="Wrap"
                        AcceptsReturn="True"
                        VerticalScrollBarVisibility="Auto"
                        Padding="12"
                        FontSize="15"
                        Background="White"
                        BorderThickness="0"/>
            </Border>

            <!-- Шаги приготовления -->
            <TextBlock Text="👨‍🍳 Шаги приготовления:" 
                      FontSize="18"
                      FontWeight="SemiBold"
                      Foreground="#8B4513"
                      Margin="0,0,0,15"/>

            <ItemsControl x:Name="StepsList" 
                         Margin="0,0,0,15">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,8,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="40"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" 
                                    Background="#FFF0E0"
                                    BorderBrush="#DEB887"
                                    BorderThickness="2"
                                    Padding="2">
                                <TextBlock Text="{Binding StepNumber}"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Center"
                                          FontWeight="Bold"
                                          FontSize="16"
                                          Foreground="#8B4513"/>
                            </Border>

                            <Border Grid.Column="1" 
                                    Background="White"
                                    BorderBrush="#DEB887"
                                    BorderThickness="2"
                                    Padding="2"
                                    Margin="5,0,5,0">
                                <TextBox Text="{Binding Description}"
                                        Padding="8"
                                        TextWrapping="Wrap"
                                        AcceptsReturn="True"
                                        FontSize="14"
                                        Background="White"
                                        BorderThickness="0"/>
                            </Border>

                            <Button Grid.Column="2" 
                                    Content="✕"
                                    Background="#CD5C5C"
                                    Foreground="White"
                                    FontWeight="Bold"
                                    FontSize="16"
                                    Click="RemoveStep_Click"
                                    Padding="2"
                                    Height="35"/>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Кнопка добавления шага -->
            <Button Content="➕ Добавить шаг приготовления" 
                    Background="#2980B9"
                    Foreground="White"
                    FontSize="15"
                    FontWeight="SemiBold"
                    Padding="15,10"
                    Click="AddStep_Click"
                    HorizontalAlignment="Left"
                    Margin="0,0,0,30"/>

            <!-- Кнопки сохранения и отмены -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" 
                        Content="💾 Сохранить рецепт" 
                        Background="#27AE60"
                        Foreground="White"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Padding="20,12"
                        Margin="0,0,15,0"
                        Click="SaveButton_Click"/>

                <Button Grid.Column="1" 
                        Content="🔙 Назад" 
                        Background="#8B7355"
                        Foreground="White"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Padding="20,12"
                        Margin="15,0,0,0"
                        Click="CancelButton_Click"/>
            </Grid>

        </StackPanel>
    </ScrollViewer>
</Window>