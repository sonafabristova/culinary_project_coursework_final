<Window x:Class="culinary_project_coursework.Windows.RecipeSelectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:culinary_project_coursework.Controls"
        Title="Выбор рецепта" 
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Выберите рецепт" 
                       FontSize="20" 
                       FontWeight="Bold"
                       Foreground="#2c3e50"/>

            <!-- Информация о фильтрации -->
            <TextBlock Name="FilterInfoText" 
                       FontSize="12" 
                       Foreground="Gray"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Список рецептов с использованием UserControl -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ListBox Name="RecipesListBox" 
                     Background="Transparent"
                     BorderThickness="0"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <!-- Используем готовый UserControl для отображения рецепта -->
                        <controls:RecipeControl Margin="0,0,0,5"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>

                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        <Setter Property="Padding" Value="0"/>
                        <Setter Property="Margin" Value="0,2,0,2"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#e8f4f8"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ListBox.ItemContainerStyle>

                <ListBox.Template>
                    <ControlTemplate>
                        <ItemsPresenter/>
                    </ControlTemplate>
                </ListBox.Template>
            </ListBox>
        </ScrollViewer>

        <!-- Кнопки действий -->
        <Border Grid.Row="2" 
                BorderBrush="LightGray" 
                BorderThickness="0,1,0,0" 
                Padding="0,10,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Информация о количестве рецептов -->
                <TextBlock Grid.Column="0"
                           VerticalAlignment="Center"
                           Margin="10,0,0,0"
                           FontSize="12"
                           Foreground="Gray"
                           Name="RecipeCountText"/>

                <!-- Кнопки -->
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Right">
                    <Button Content="Выбрать" 
                            Click="SelectButton_Click" 
                            Padding="20,8"
                            Margin="0,0,10,0"
                            Background="#3498db"
                            Foreground="White"
                            FontWeight="Bold"
                            MinWidth="100"
                            Cursor="Hand"/>

                    <Button Content="Отмена" 
                            Click="CancelButton_Click" 
                            Padding="20,8"
                            Background="#95a5a6"
                            Foreground="White"
                            FontWeight="Bold"
                            MinWidth="100"
                            Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>